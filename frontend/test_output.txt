
> rest-express@1.0.0 test
> vitest src/test/MediaEditor.test.tsx --run


[1m[46m RUN [49m[22m [36mv4.0.16 [39m[90m/Users/kklues/ProgrammingProjects/insta-mockup/frontend[39m

 [31mâ¯[39m src/test/MediaEditor.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1826[2mms[22m[39m
     [32mâœ“[39m renders edit form with video data[32m 123[2mms[22m[39m
     [32mâœ“[39m renders add form for new video[32m 37[2mms[22m[39m
     [32mâœ“[39m updates video details on save[32m 203[2mms[22m[39m
     [32mâœ“[39m handles instagram ingest[32m 250[2mms[22m[39m
[31m     [31mÃ—[31m handles instagram save with proxy upload[39m[33m 1213[2mms[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 1 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m src/test/MediaEditor.test.tsx[2m > [22mMediaEditor[2m > [22mhandles instagram save with proxy upload
[31m[1mAssertionError[22m[39m: expected "vi.fn()" to be called with arguments: [ StringContaining{â€¦}, Anything ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/api/instagram/proxy",[90m
[32m-   Anything,[90m
[31m+   "/api/instagram/proxy?url=http%3A%2F%2Finsta.com%2Fvid.mp4",[90m
[2m  ][22m

[1m  2nd vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/api/instagram/proxy",[90m
[32m-   Anything,[90m
[31m+   "/api/objects/upload",[90m
[31m+   {[90m
[31m+     "body": FormData {},[90m
[31m+     "method": "POST",[90m
[31m+   },[90m
[2m  ][22m
[39m[90m

Number of calls: [1m2[22m
[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body[39m
    [33mdata-scroll-locked[39m=[32m"1"[39m
    [33mstyle[39m=[32m"pointer-events: none;"[39m
  [36m>[39m
    [36m<span[39m
      [33maria-hidden[39m=[32m"true"[39m
      [33mdata-aria-hidden[39m=[32m"true"[39m
      [33mdata-radix-focus-guard[39m=[32m""[39m
      [33mstyle[39m=[32m"outline: none; opacity: 0; position: fixed; pointer-events: none;"[39m
      [33mtabindex[39m=[32m"0"[39m
    [36m/>[39m
    [36m<div[39m
      [33maria-hidden[39m=[32m"true"[39m
      [33mdata-aria-hidden[39m=[32m"true"[39m
    [36m/>[39m
    [36m<div[39m
      [33maria-hidden[39m=[32m"true"[39m
      [33mclass[39m=[32m"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"[39m
      [33mdata-aria-hidden[39m=[32m"true"[39m
      [33mdata-state[39m=[32m"open"[39m
      [33mstyle[39m=[32m"pointer-events: auto;"[39m
    [36m/>[39m
    [36m<div[39m
      [33maria-describedby[39m=[32m"radix-_r_1q_"[39m
      [33maria-labelledby[39m=[32m"radix-_r_1p_"[39m
      [33mclass[39m=[32m"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg sm:max-w-[500px]"[39m
      [33mdata-state[39m=[32m"open"[39m
      [33mid[39m=[32m"radix-_r_1o_"[39m
      [33mrole[39m=[32m"dialog"[39m
      [33mstyle[39m=[32m"pointer-events: auto;"[39m
      [33mtabindex[39m=[32m"-1"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex flex-col space-y-1.5 text-center sm:text-left"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-lg font-semibold leading-none tracking-tight"[39m
          [33mid[39m=[32m"radix-_r_1p_"[39m
        [36m>[39m
          [0mAdd Media[0m
        [36m</h2>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
          [33mid[39m=[32m"radix-_r_1q_"[39m
        [36m>[39m
          [0mAdd new media to the feed.[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"grid gap-4 py-4 max-h-[60vh] overflow-y-auto"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid gap-2"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
            [36m>[39m
              [0mMedia Source[0m
            [36m</label>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-[200px]"[39m
              [33mdata-orientation[39m=[32m"horizontal"[39m
              [33mdir[39m=[32m"ltr"[39m
            [36m>[39m
              [36m<div[39m
                [33maria-orientation[39m=[32m"horizontal"[39m
                [33mclass[39m=[32m"items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground grid w-full grid-cols-2 h-7"[39m
                [33mdata-orientation[39m=[32m"horizontal"[39m
                [33mrole[39m=[32m"tablist"[39m
                [33mstyle[39m=[32m"outline: none;"[39m
                [33mtabindex[39m=[32m"0"[39m
              [36m>[39m
                [36m<button[39m
                  [33maria-controls[39m=[32m"radix-_r_1u_-content-upload"[39m
                  [33maria-selected[39m=[32m"false"[39m
                  [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow text-xs h-6"[39m
                  [33mdata-orientation[39m=[32m"horizontal"[39m
                  [33mdata-radix-collection-item[39m=[32m""[39m
                  [33mdata-state[39m=[32m"inactive"[39m
                  [33mid[39m=[32m"radix-_r_1u_-trigger-upload"[39m
                  [33mrole[39m=[32m"tab"[39m
                  [33mtabindex[39m=[32m"-1"[39m
                  [33mtype[39m=[32m"button"[39m
                [36m>[39m
                  [0mUpload[0m
                [36m</button>[39m
                [36m<button[39m
                  [33maria-controls[39m=[32m"radix-_r_1u_-content-instagram"[39m
                  [33maria-selected[39m=[32m"true"[39m
                  [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow text-xs h-6"[39m
                  [33mdata-orientation[39m=[32m"horizontal"[39m
                  [33mdata-radix-collection-item[39m=[32m""[39m
                  [33mdata-state[39m=[32m"active"[39m
                  [33mid[39m=[32m"radix-_r_1u_-trigger-instagram"[39m
                  [33mrole[39m=[32m"tab"[39m
                  [33mtabindex[39m=[32m"0"[39m
                  [33mtype[39m=[32m"button"[39m
                [36m>[39m
                  [0mInstagram[0m
                [36m</button>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-2 p-3 border rounded-lg bg-muted/30"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"font-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-xs"[39m
              [36m>[39m
                [0mInstagram Post URL[0m
              [36m</label>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex gap-2"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"flex w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-...
[36m [2mâ¯[22m src/test/MediaEditor.test.tsx:[2m199:49[22m[39m
    [90m197| [39m        // expect(queryClientModule.fetchWithAuth).toHaveBeenCalledTimâ€¦
    [90m198| [39m        // Checking specific calls might be flaky on order if multipleâ€¦
    [90m199| [39m        expect(queryClientModule.fetchWithAuth).toHaveBeenCalledWith(eâ€¦
    [90m   | [39m                                                [31m^[39m
    [90m200| [39m        expect(queryClientModule.fetchWithAuth).toHaveBeenCalledWith('â€¦
    [90m201| [39m        
[90m [2mâ¯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2mâ¯[22m checkCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2mâ¯[22m Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/1]âŽ¯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m4 passed[39m[22m[90m (5)[39m
[2m   Start at [22m 12:45:19
[2m   Duration [22m 2.76s[2m (transform 108ms, setup 119ms, import 280ms, tests 1.83s, environment 442ms)[22m

